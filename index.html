<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙØ®Ù…ÙÙ„ - Ø§ÙƒØªØ´Ù Ø¹Ø·Ø±Ùƒ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="logo-container">
                <img src="logo.svg" alt="Ù…ÙØ®Ù…ÙÙ„" class="brand-logo">
            </div>
            <h1 class="brand-name">Ù…ÙØ®Ù…ÙÙ„</h1>
            <p class="tagline">Ø­Ø¶ÙˆØ± Ù„Ø§ ÙŠÙ†Ø³Ù‰</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
            <div class="progress-text" id="progressText">1 / 6</div>
        </div>

        <!-- Quiz Form -->
        <div class="quiz-container" id="quizContainer">
            <form id="quizForm" method="POST">
                
                <!-- Step 1: Age -->
                <div class="step" data-step="1">
                    <h2 class="step-title">ÙƒÙ… Ø¹Ù…Ø±ÙƒØŸ</h2>
                    <div class="options">
                        <label class="option-label">
                            <input type="radio" name="age" value="under18">
                            <div class="option-box">Ø£Ù‚Ù„ Ù…Ù† 18</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="age" value="20s">
                            <div class="option-box">Ø§Ù„Ø¹Ø´Ø±ÙŠÙ†Ø§Øª</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="age" value="30s">
                            <div class="option-box">Ø§Ù„Ø«Ù„Ø§Ø«ÙŠÙ†Ø§Øª</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="age" value="40s">
                            <div class="option-box">Ø§Ù„Ø£Ø±Ø¨Ø¹ÙŠÙ†Ø§Øª</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="age" value="50plus">
                            <div class="option-box">50+</div>
                        </label>
                    </div>
                </div>

                <!-- Step 2: Gender -->
                <div class="step" data-step="2" style="display: none;">
                    <h2 class="step-title">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</h2>
                    <div class="options">
                        <label class="option-label">
                            <input type="radio" name="gender" value="male">
                            <div class="option-box">Ø±Ø¬Ø§Ù„ÙŠ</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="gender" value="female">
                            <div class="option-box">Ù†Ø³Ø§Ø¦ÙŠ</div>
                        </label>
                    </div>
                </div>

                <!-- Step 3: Usage -->
                <div class="step" data-step="3" style="display: none;">
                    <h2 class="step-title">Ù…ØªÙ‰ Ø³ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø·Ø± ØºØ§Ù„Ø¨Ù‹Ø§ØŸ</h2>
                    <div class="options">
                        <label class="option-label">
                            <input type="radio" name="usage" value="daily">
                            <div class="option-box">ÙŠÙˆÙ…ÙŠ</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="usage" value="formal">
                            <div class="option-box">Ù…Ù†Ø§Ø³Ø¨Ø§Øª</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="usage" value="night">
                            <div class="option-box">Ù…Ø³Ø§Ø¡</div>
                        </label>
                    </div>
                </div>

                <!-- Step 4: Strength -->
                <div class="step" data-step="4" style="display: none;">
                    <h2 class="step-title">ØªØ­Ø¨ Ø§Ù„Ø¹Ø·Ø± ÙŠÙƒÙˆÙ†ØŸ</h2>
                    <div class="options">
                        <label class="option-label">
                            <input type="radio" name="strength" value="soft">
                            <div class="option-box">Ù†Ø§Ø¹Ù… ÙˆÙ‚Ø±ÙŠØ¨</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="strength" value="balanced">
                            <div class="option-box">Ù…ØªÙˆØ§Ø²Ù†</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="strength" value="strong">
                            <div class="option-box">Ù‚ÙˆÙŠ ÙˆÙ„Ø§ÙØª</div>
                        </label>
                    </div>
                </div>

                <!-- Step 5: Style -->
                <div class="step" data-step="5" style="display: none;">
                    <h2 class="step-title">Ø£ÙŠ Ø·Ø§Ø¨Ø¹ ÙŠÙ„ÙØª Ø§Ù†ØªØ¨Ø§Ù‡Ùƒ Ø£ÙƒØ«Ø±ØŸ</h2>
                    <div class="options">
                        <label class="option-label">
                            <input type="radio" name="style" value="classic">
                            <div class="option-box">ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ ÙˆØ£Ù†ÙŠÙ‚</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="style" value="modern">
                            <div class="option-box">Ø¹ØµØ±ÙŠ ÙˆÙ…Ø¶ÙŠØ¡</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="style" value="mysterious">
                            <div class="option-box">ØºØ§Ù…Ø¶ ÙˆØ¹Ù…ÙŠÙ‚</div>
                        </label>
                    </div>
                </div>

                <!-- Step 6: Note -->
                <div class="step" data-step="6" style="display: none;">
                    <h2 class="step-title">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØªØ© Ø§Ù„Ø£Ù‚Ø±Ø¨ Ù„Ù‚Ù„Ø¨Ùƒ</h2>
                    <div class="options">
                        <label class="option-label">
                            <input type="radio" name="note" value="oud">
                            <div class="option-box">Ø¹ÙˆØ¯ ÙˆØ®Ø´Ø¨</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="note" value="floral">
                            <div class="option-box">Ø²Ù‡ÙˆØ± Ù†Ø§Ø¹Ù…Ø©</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="note" value="sweet">
                            <div class="option-box">Ø­Ù„Ø§ÙˆØ© Ø¯Ø§ÙØ¦Ø©</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="note" value="fresh">
                            <div class="option-box">Ø§Ù†ØªØ¹Ø§Ø´ ÙˆØ­Ù…Ø¶ÙŠØ§Øª</div>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="note" value="spicy">
                            <div class="option-box">ØªÙˆØ§Ø¨Ù„ ÙˆØ­ÙØ¯Ù‘Ø©</div>
                        </label>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="navigation">
                    <button type="button" class="btn-prev" id="prevBtn" style="display: none;">â† Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                </div>

            </form>
        </div>

        <!-- Result Container -->
        <div class="result-container" id="resultContainer" style="display: none;">
            <div class="result-card">
                <div class="perfume-result">
                    <div class="perfume-image-container">
                        <img id="plantImage" src="" alt="" class="perfume-image">
                    </div>
                    
                    <h3 id="plantName" class="perfume-name"></h3>
                    
                    <div id="plantDescription" class="perfume-description"></div>
                    
                    <div class="result-actions">
                        <button id="resetButton" class="btn-secondary">
                            Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>Â© 2025 Ù…ÙØ®Ù…ÙÙ„</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        
        // Perfume database
        const perfumes = {
            shakhah: {
                image: 'https://via.placeholder.com/400x300/0a0a0a/7b1b38?text=ğŸ’©',
                name: '',
                latinName: '',
                gender: 'none',
                notes: '',
                description: ''
            },
            ouwar: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/awar.JPG',
                name: 'Ø£ÙÙˆØ§Ø±',
                latinName: 'ouwar',
                gender: 'male',
                notes: 'Ø¨Ø±ØºÙ…ÙˆØª â€“ ÙÙ„ÙÙ„ ÙˆØ±Ø¯ÙŠ â€“ Ø¹ÙˆØ¯ â€“ Ø¹Ù†Ø¨Ø± Ø£Ø¨ÙŠØ¶ â€“ Ø¬Ù„Ø¯ â€“ Ù…Ø³Ùƒ',
                description: 'Ø¹Ø·Ø± Ù‚ÙˆÙŠ ÙˆØ­Ø§Ø¯ØŒ Ø±Ø§Ù‚Ù ÙˆØ¬Ø°Ø§Ø¨ØŒ ÙŠØ¹ÙƒØ³ ÙØ®Ø§Ù…Ø© Ø¹Ù…ÙŠÙ‚Ø© ÙˆØ­Ø¶ÙˆØ±Ù‹Ø§ ÙˆØ§Ø«Ù‚Ù‹Ø§ØŒ Ø¨Ø·Ø§Ø¨Ø¹ Ø¬Ù„Ø¯ÙŠâ€“Ø¹ÙˆØ¯ÙŠ Ø£Ù†ÙŠÙ‚.'
            },
            alez: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/alaz.JPG',
                name: 'Ø§Ù„Ø¹ÙØ²',
                latinName: 'alez',
                gender: 'male',
                notes: 'Ø¨Ø±ØºÙ…ÙˆØª â€“ Ù„Ø§ÙÙ†Ø¯Ø± â€“ Ø²Ø¹ÙØ±Ø§Ù† â€“ Ø¹ÙˆØ¯ Ø®Ø´Ø¨ÙŠ â€“ Ø¬Ù„Ø¯ â€“ Ù…Ø³Ùƒ â€“ Ø¹ÙˆØ¯',
                description: 'Ø´Ø±Ù‚ÙŠ Ø®Ø´Ø¨ÙŠ Ø£Ø±ÙˆÙ…Ø§ØªÙŠÙƒØŒ Ù…Ù‡ÙŠØ¨ ÙˆÙ…ØªØ²Ù†ØŒ ÙŠØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø±Ø¬ÙˆÙ„Ø© Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ© ÙˆØ§Ù„Ù‚ÙˆØ© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©.'
            },
            gentle: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/gentle.JPG',
                name: 'Ø¬ÙÙ†ØªÙ„',
                latinName: 'gentle',
                gender: 'male',
                notes: 'ØªÙˆØª Ø§Ù„Ø¹Ø±Ø¹Ø± â€“ Ø¬ÙˆØ²Ø© Ø§Ù„Ø·ÙŠØ¨ â€“ ÙƒØ²Ø¨Ø±Ø© â€“ ÙØ§Ù†ÙŠÙ„ÙŠØ§ â€“ Ù…Ø³Ùƒ â€“ ÙƒØ±Ø§Ù…ÙŠÙ„ â€“ Ø®Ø´Ø¨ Ø§Ù„Ø¹Ù†Ø¨Ø±',
                description: 'Ø¯Ø§ÙØ¦ ÙˆØ­Ù„ÙˆØŒ Ù†Ø§Ø¹Ù… ÙˆÙØ§Ø®Ø±ØŒ Ø¨ÙØ§Ù†ÙŠÙ„ÙŠØ§ ØºÙ†ÙŠØ© ÙˆÙ„Ù…Ø³Ø© Ù…Ø®Ù…Ù„ÙŠØ© Ø£Ù†ÙŠÙ‚Ø©.'
            },
            arabi: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/azbi.JPG',
                name: 'Ø¹ÙØ±ÙØ¨ÙŠ',
                latinName: 'arabi',
                gender: 'male',
                notes: 'Ø²Ø¹ÙØ±Ø§Ù† â€“ ÙˆØ±Ø¯ Ø£Ø³ÙˆØ¯ â€“ ÙØ§Ù†ÙŠÙ„ÙŠØ§ â€“ Ø¨Ø§ØªØ´ÙˆÙ„ÙŠ â€“ Ø¹ÙˆØ¯',
                description: 'ÙØ®Ù…ØŒ Ø¯Ø§ÙØ¦ ÙˆØºØ§Ù…Ø¶ØŒ Ø¨Ø±ÙˆØ­ Ø´Ø±Ù‚ÙŠØ© Ø£ØµÙŠÙ„Ø© ÙˆÙ„Ù…Ø³Ø© Ø¹ÙˆØ¯ Ø¹Ù…ÙŠÙ‚Ø©.'
            },
            rajul: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/rajul.JPG',
                name: 'Ø±ÙØ¬ÙÙ„',
                latinName: 'rajul',
                gender: 'male',
                notes: 'Ù‡ÙŠÙ„ â€“ Ø¬Ù„Ø¯ â€“ Ø¹Ù†Ø¨Ø± â€“ Ø·Ø­Ø§Ù„Ø¨ â€“ Ø¨Ø§ØªØ´ÙˆÙ„ÙŠ',
                description: 'Ø¬Ù„Ø¯ÙŠ ØªØ±Ø§Ø¨ÙŠ Ù‚ÙˆÙŠØŒ Ø±Ø¬ÙˆÙ„ÙŠ ØµÙØ±ÙØŒ ÙŠØ¹ÙƒØ³ Ø§Ù„Ø«Ø¨Ø§Øª ÙˆØ§Ù„Ù‡ÙŠØ¨Ø© ÙˆØ§Ù„Ù†Ø¶Ø¬.'
            },
            ghasaq: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/ghasaq.JPG', //!
                name: 'ØºÙØ³ÙÙ‚',
                latinName: 'ghasaq',
                gender: 'male',
                notes: 'Ø­Ù…Ø¶ÙŠØ§Øª â€“ ØªÙˆØ§Ø¨Ù„ Ø¯Ø§ÙØ¦Ø© â€“ Ø£ÙˆØ±ÙƒÙŠØ¯ Ø£Ø³ÙˆØ¯ â€“ Ø¨Ø®ÙˆØ± â€“ Ø£Ø®Ø´Ø§Ø¨ â€“ Ø´ÙˆÙƒÙˆÙ„Ø§',
                description: 'Ø¯Ø§ÙØ¦ØŒ ÙØ§Ø®Ø± ÙˆØºØ§Ù…Ù‚ØŒ Ø¨Ø·Ø§Ø¨Ø¹ Ø´Ø±Ù‚ÙŠ Ø²Ù‡Ø±ÙŠ Ù…Ø¸Ù„Ù… ÙˆÙ„Ù…Ø³Ø© Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© Ø¹Ù…ÙŠÙ‚Ø©.'
            },
            haybah: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/heyba.JPG',
                name: 'Ù‡ÙÙŠÙ’Ø¨ÙØ©',
                latinName: 'haybah',
                gender: 'male',
                notes: 'Ø£Ù†Ø§Ù†Ø§Ø³ â€“ ÙƒØ±ÙŠÙÙˆÙ â€“ Ø¨Ø±ØºÙ…ÙˆØª â€“ Ø¨Ø§ØªØ´ÙˆÙ„ÙŠ â€“ ÙŠØ§Ø³Ù…ÙŠÙ† â€“ Ø£Ø®Ø´Ø§Ø¨ â€“ Ø·Ø­Ø§Ù„Ø¨',
                description: 'Ù…Ù†Ø¹Ø´ ÙØ§Ø®Ø±ØŒ Ù‚ÙˆÙŠ Ø§Ù„Ø´Ø®ØµÙŠØ©ØŒ ÙŠØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø¯Ø§Ø«Ø© ÙˆØ§Ù„Ù‡ÙŠØ¨Ø© Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©.'
            },
            jamr: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/jamr.JPG',
                name: 'Ø¬ÙÙ…Ù’Ø±',
                latinName: 'jamr',
                gender: 'male',
                notes: 'Ù‡ÙŠÙ„ â€“ Ù‚Ø±ÙØ© â€“ Ø¨Ø§ØªØ´ÙˆÙ„ÙŠ â€“ ÙˆØ±Ø¯ ØªØ±ÙƒÙŠ â€“ Ø¬Ù„Ø¯ â€“ Ø¹ÙˆØ¯ Ø¹Ù†Ø¨Ø±ÙŠ',
                description: 'Ø­Ø§Ø± ÙˆØ¯Ø§ÙØ¦ØŒ Ø´Ø±Ù‚ÙŠ Ø¬Ù„Ø¯ÙŠØŒ Ø¬Ø±ÙŠØ¡ ÙˆÙ…Ø´ØªØ¹Ù„ ÙƒØ§Ù„Ø¬Ù…Ø±.'
            },
            waqar: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/waqar.JPG',
                name: 'ÙˆÙÙ‚ÙØ§Ø±',
                latinName: 'waqar',
                gender: 'male',
                notes: 'Ù‡ÙŠÙ„ â€“ ÙÙ„ÙÙ„ â€“ Ø®Ø´Ø¨ ØµÙ†Ø¯Ù„ â€“ Ø¹ÙˆØ¯ â€“ Ø¨Ø§ØªØ´ÙˆÙ„ÙŠ â€“ ØªÙˆÙ†ÙƒØ§ â€“ Ø¹Ù†Ø¨Ø± â€“ ÙØ§Ù†ÙŠÙ„ÙŠØ§',
                description: 'ÙØ®Ù… ÙˆÙ‡Ø§Ø¯Ø¦ØŒ Ø¹Ù…ÙŠÙ‚ ÙˆÙ…ØªØ²Ù†ØŒ ÙŠØ¹ÙƒØ³ Ø§Ù„ÙˆÙ‚Ø§Ø± ÙˆØ§Ù„Ø±Ù‚ÙŠ Ø§Ù„Ø¹Ø§Ù„ÙŠ.'
            },
            ufuq: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/ufuq.JPG',
                name: 'Ø£ÙÙÙÙ‚',
                latinName: 'ufuq',
                gender: 'male',
                notes: 'Ù…Ù†Ø¯Ø±ÙŠÙ† â€“ ÙƒØ±Ø§Ù…ÙŠÙ„ â€“ Ø¹Ø³Ù„ â€“ ØªÙˆÙ†ÙƒØ§',
                description: 'Ø¯Ø§ÙØ¦ Ø­Ù„ÙˆØŒ Ù…Ø±ÙŠØ­ ÙˆÙ†Ø§Ø¹Ù…ØŒ Ø¨Ø¥Ø­Ø³Ø§Ø³ Ø¹ØµØ±ÙŠ Ø¬Ø°Ø§Ø¨.'
            },
            duja: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/duja.JPG',
                name: 'Ø¯ÙØ¬Ù‰',
                latinName: 'duja',
                gender: 'male',
                notes: 'Ù†Ø¨ÙŠØ° â€“ Ø¨Ø±ØºÙ…ÙˆØª â€“ Ù„Ø§ÙÙ†Ø¯Ø± â€“ ÙØ§Ù†ÙŠÙ„ÙŠØ§ â€“ ÙƒØ³ØªÙ†Ø§Ø¡ â€“ Ø¨Ø§ØªØ´ÙˆÙ„ÙŠ',
                description: 'Ù„ÙŠÙ„ÙŠ ØºØ§Ù…Ù‚ØŒ Ø¯Ø§ÙØ¦ ÙˆØ­Ø³ÙŠØŒ Ø¨Ø·Ø§Ø¨Ø¹ ÙØ§Ø®Ø± ÙˆÙ…Ø®Ù…Ù„ÙŠ.'
            },
            wahj: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/wahj.JPG',
                name: 'ÙˆÙÙ‡Ù’Ø¬',
                latinName: 'wahj',
                gender: 'male',
                notes: 'ØªÙØ§Ø­ â€“ Ù„Ø§ÙÙ†Ø¯Ø± â€“ ØºØ§Ø±Ø¯ÙŠÙ†ÙŠØ§ â€“ ÙŠØ§Ø³Ù…ÙŠÙ† â€“ ÙØ§Ù†ÙŠÙ„ÙŠØ§ â€“ Ù‡ÙŠÙ„ â€“ Ø®Ø´Ø¨ ØµÙ†Ø¯Ù„ â€“ Ø¨Ø§ØªØ´ÙˆÙ„ÙŠ',
                description: 'Ù…Ø¶ÙŠØ¡ ÙˆØ¯Ø§ÙØ¦ØŒ Ø£Ù†ÙŠÙ‚ ÙˆÙ…ØªÙˆØ§Ø²Ù†ØŒ ÙŠØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ù†Ø¹ÙˆÙ…Ø© ÙˆØ§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©.'
            },
            ghazal: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/gazal.JPG',
                name: 'ØºÙØ²ÙÙ„',
                latinName: 'ghazal',
                gender: 'female',
                notes: 'Ø®ÙˆØ® â€“ Ù…Ù†Ø¯ÙØ±ÙŠÙ† â€“ Ø²Ù‡ÙˆØ± Ø¨ÙŠØ¶Ø§Ø¡ â€“ Ø£ÙˆØ±ÙƒÙŠØ¯ Ø²Ù‡Ø±ÙŠ â€“ ØªÙˆØª â€“ Ù…Ø³Ùƒ',
                description: 'Ø£Ù†Ø«ÙˆÙŠ Ù†Ø§Ø¹Ù…ØŒ Ø­Ù„Ùˆ ÙˆÙ…Ù†Ø¹Ø´ØŒ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ ÙˆØ¬Ø°Ø§Ø¨.'
            },
            ghuroor: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/ghurur.JPG',
                name: 'ØºÙØ±ÙˆØ±',
                latinName: 'ghuroor',
                gender: 'female',
                notes: 'Ø²Ù‡Ø± Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ â€“ Ø¨Ø±ØºÙ…ÙˆØª â€“ ÙŠØ§Ø³Ù…ÙŠÙ† â€“ ÙØ§Ù†ÙŠÙ„ÙŠØ§ â€“ Ù…Ø³Ùƒ',
                description: 'ÙØ§Ø®Ø± ÙˆØ£Ù†ÙŠÙ‚ØŒ Ù†Ø§Ø¹Ù… ÙˆØ­Ø³ÙŠØŒ ÙŠØ¹ÙƒØ³ Ø§Ù„Ø«Ù‚Ø© ÙˆØ§Ù„ØªÙ…ÙŠÙ‘Ø².'
            },
            hayam: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/heyam.JPG',
                name: 'Ù‡ÙÙŠÙØ§Ù…',
                latinName: 'hayam',
                gender: 'female',
                notes: 'ÙƒØ´Ù…Ø´ Ø£Ø³ÙˆØ¯ â€“ ÙƒÙ…Ø«Ø±Ù‰ â€“ Ø²Ù‡ÙˆØ± Ø¨ÙŠØ¶Ø§Ø¡ â€“ Ø³ÙˆØ³Ù† â€“ ØªÙˆÙ†ÙƒØ§ â€“ ÙØ§Ù†ÙŠÙ„ÙŠØ§',
                description: 'Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ Ø¯Ø§ÙØ¦ØŒ Ù†Ø§Ø¹Ù… ÙˆØ¹Ù…ÙŠÙ‚ØŒ Ø£Ù†Ø«ÙˆÙŠ ÙˆÙ…Ø®Ù…Ù„ÙŠ.'
            },
            hamsah: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/hamsah.JPG', //!
                name: 'Ù‡ÙÙ…Ù’Ø³ÙØ©',
                latinName: 'hamsah',
                gender: 'female',
                notes: 'Ø²Ù‡ÙˆØ± Ø§Ù„Ù†Ø§Ø±Ù†Ø¬ â€“ Ù„Ø§ÙÙ†Ø¯Ø± â€“ Ø²Ù‡ÙˆØ± Ø¨ÙŠØ¶Ø§Ø¡ â€“ Ø¹Ù†Ø¨Ø± Ø£Ø¨ÙŠØ¶ â€“ Ù…Ø³Ùƒ',
                description: 'Ù‡Ø§Ø¯Ø¦ ÙˆÙ†Ù‚ÙŠØŒ Ø£Ù†Ø«ÙˆÙŠ Ø±Ø§Ù‚ÙØŒ Ù†Ø§Ø¹Ù… ÙƒÙ‡Ù…Ø³Ø© Ø¯Ø§ÙØ¦Ø©.'
            },
            waad: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/waad.JPG',
                name: 'ÙˆÙØ¹Ù’Ø¯',
                latinName: 'waad',
                gender: 'female',
                notes: 'Ø®ÙˆØ® â€“ ØªÙˆØª â€“ Ø²Ù†Ø¨Ù‚ â€“ Ø®Ø´Ø¨ ØµÙ†Ø¯Ù„ â€“ Ù…Ø³Ùƒ',
                description: 'Ù†Ø§Ø¹Ù… ÙˆÙ…Ø´Ø±Ù‚ØŒ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ ÙˆØ£Ù†ÙŠÙ‚ØŒ Ø¥Ø­Ø³Ø§Ø³ Ø¨Ø§Ù„Ø¯ÙØ¡ ÙˆØ§Ù„ÙˆÙØ§Ø¡.'
            },
            suha: {
                image: 'https://raw.githubusercontent.com/eymeen/mukhmal-quiz/refs/heads/main/imgs/suha.JPG',
                name: 'Ø³ÙÙ‡Ù‰',
                latinName: 'suha',
                gender: 'female',
                notes: 'ÙØ±ÙŠØ² â€“ ØªÙˆØª Ø£Ø­Ù…Ø± â€“ ØªÙˆØª Ø£Ø³ÙˆØ¯ â€“ ÙƒØ±Ø² â€“ Ø¹Ù†Ø¨ Ø£Ø³ÙˆØ¯ â€“ Ù„ÙŠÙ…ÙˆÙ†',
                description: 'ÙØ±ÙˆØªÙŠ Ù…Ø´Ø±Ù‚ØŒ Ø­ÙŠÙˆÙŠ ÙˆØ¬Ø°Ø§Ø¨ØŒ Ù…Ø±Ø­ ÙˆØ£Ù†Ø«ÙˆÙŠ Ø¨Ù„Ù…Ø³Ø© Ù„ÙŠÙ„ÙŠØ©.'
            }
        };

        function includesAny(text, keywords) {
            return keywords.some(kw => text.includes(kw));
        }

        function extractTags(perfume) {
            const text = `${perfume.notes} ${perfume.description}`.toLowerCase();
            const tags = new Set();

            if (includesAny(text, ['Ø¹ÙˆØ¯', 'Ø®Ø´Ø¨'])) tags.add('oud');
            if (includesAny(text, ['Ø®Ø´Ø¨', 'ØµÙ†Ø¯Ù„'])) tags.add('woody');
            if (includesAny(text, ['Ø¹Ù†Ø¨Ø±'])) tags.add('amber');
            if (includesAny(text, ['Ù…Ø³Ùƒ'])) tags.add('musk');
            if (includesAny(text, ['ÙØ§Ù†ÙŠÙ„ÙŠØ§', 'ÙƒØ±Ø§Ù…ÙŠÙ„', 'Ø¹Ø³Ù„', 'ØªÙˆÙ†ÙƒØ§', 'Ø­Ù„Ùˆ'])) tags.add('sweet');
            if (includesAny(text, ['Ø­Ù…Ø¶ÙŠØ§Øª', 'Ù„ÙŠÙ…ÙˆÙ†', 'Ù…Ù†Ø¯Ø±ÙŠÙ†', 'Ø¨Ø±ØºÙ…ÙˆØª', 'ØªÙØ§Ø­', 'Ø£Ù†Ø§Ù†Ø§Ø³', 'Ù…Ù†Ø¹Ø´'])) tags.add('fresh');
            if (includesAny(text, ['ÙˆØ±Ø¯', 'Ø²Ù‡ÙˆØ±', 'ÙŠØ§Ø³Ù…ÙŠÙ†', 'ØºØ§Ø±Ø¯ÙŠÙ†ÙŠØ§', 'Ø£ÙˆØ±ÙƒÙŠØ¯', 'Ø²Ù‡Ø±'])) tags.add('floral');
            if (includesAny(text, ['ÙÙ„ÙÙ„', 'Ù‚Ø±ÙØ©', 'Ù‡ÙŠÙ„', 'Ø²Ø¹ÙØ±Ø§Ù†', 'ØªÙˆØ§Ø¨Ù„', 'Ø­Ø§Ø±'])) tags.add('spicy');
            if (includesAny(text, ['Ø¨Ø®ÙˆØ±', 'Ø¯Ø®Ø§Ù†ÙŠ', 'ØªØ¨Øº'])) tags.add('smoky');
            if (includesAny(text, ['Ø®ÙˆØ®', 'ØªÙˆØª', 'ÙØ±ÙŠØ²', 'ÙƒÙ…Ø«Ø±Ù‰', 'ÙƒØ±Ø²', 'Ø¹Ù†Ø¨', 'ÙØ±ÙˆØªÙŠ', 'ÙÙˆØ§ÙƒÙ‡'])) tags.add('fruity');

            if (includesAny(text, ['Ù‚ÙˆÙŠ', 'Ø­Ø§Ø¯', 'Ø¬Ø±ÙŠØ¡', 'Ù…Ø´ØªØ¹Ù„'])) tags.add('strong');
            if (includesAny(text, ['Ù†Ø§Ø¹Ù…', 'Ù…Ø±ÙŠØ­', 'Ù‡Ø§Ø¯Ø¦'])) tags.add('soft');
            if (includesAny(text, ['Ù…ØªÙˆØ§Ø²Ù†', 'Ù…ØªØ²Ù†'])) tags.add('balanced');

            if (includesAny(text, ['ÙØ®Ù…', 'Ù…Ù‡ÙŠØ¨', 'ÙˆÙ‚Ø§Ø±', 'Ù‡ÙŠØ¨Ø©', 'Ø±Ø§Ù‚ÙŠ', 'Ø£Ù†ÙŠÙ‚', 'ØªÙ…ÙŠÙ‘Ø²', 'Ø±Ø³Ù…ÙŠ'])) tags.add('formal');
            if (includesAny(text, ['Ø¹ØµØ±ÙŠ', 'Ø­Ø¯ÙŠØ«', 'Ù…Ø´Ø±Ù‚'])) tags.add('modern');
            if (includesAny(text, ['ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ', 'Ø£Ù†Ø§Ù‚Ø©'])) tags.add('classic');
            if (includesAny(text, ['ØºØ§Ù…Ø¶', 'Ù…Ø¸Ù„Ù…', 'Ù„ÙŠÙ„ÙŠ', 'Ø¬Ø°Ø§Ø¨'])) tags.add('mysterious');
            if (includesAny(text, ['Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ'])) tags.add('romantic');

            return tags;
        }

        function scorePerfume(perfumeTags, desiredTags) {
            const weights = {
                note: 4,
                occasion: 2,
                strength: 2,
                style: 2
            };

            let score = 0;

            desiredTags.forEach(item => {
                if (perfumeTags.has(item.tag)) {
                    score += weights[item.kind] ?? 1;
                }
            });

            return score;
        }

        // Step navigation
        let currentStep = 1;
        const totalSteps = 6;

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${currentStep} / ${totalSteps}`;
        }

        function showStep(stepNumber) {
            document.querySelectorAll('.step').forEach(step => {
                step.style.display = 'none';
            });
            
            const targetStep = document.querySelector(`[data-step="${stepNumber}"]`);
            if (targetStep) {
                targetStep.style.display = 'block';
            }

            const prevBtn = document.getElementById('prevBtn');
            if (stepNumber > 1) {
                prevBtn.style.display = 'block';
            } else {
                prevBtn.style.display = 'none';
            }

            currentStep = stepNumber;
            updateProgress();
        }

        // Auto-advance on selection
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', function() {
                setTimeout(() => {
                    if (currentStep < totalSteps) {
                        showStep(currentStep + 1);
                    } else if (currentStep === totalSteps) {
                        // Last step - show results
                        calculateAndShowResult();
                    }
                }, 300);
            });
        });

        // Previous button
        document.getElementById('prevBtn').addEventListener('click', function() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        });

        function calculateAndShowResult() {
            const formData = new FormData(document.getElementById('quizForm'));
            const gender = formData.get('gender');
            const usage = formData.get('usage');
            const strength = formData.get('strength');
            const style = formData.get('style');
            const note = formData.get('note');

            const desiredTags = [];

            if (note === 'oud') {
                desiredTags.push({ kind: 'note', tag: 'oud' });
                desiredTags.push({ kind: 'note', tag: 'woody' });
            }
            if (note === 'floral') desiredTags.push({ kind: 'note', tag: 'floral' });
            if (note === 'sweet') desiredTags.push({ kind: 'note', tag: 'sweet' });
            if (note === 'fresh') desiredTags.push({ kind: 'note', tag: 'fresh' });
            if (note === 'spicy') desiredTags.push({ kind: 'note', tag: 'spicy' });

            if (usage === 'daily') desiredTags.push({ kind: 'occasion', tag: 'fresh' });
            if (usage === 'formal') desiredTags.push({ kind: 'occasion', tag: 'formal' });
            if (usage === 'night') {
                desiredTags.push({ kind: 'occasion', tag: 'mysterious' });
                desiredTags.push({ kind: 'occasion', tag: 'romantic' });
            }

            if (strength === 'soft') desiredTags.push({ kind: 'strength', tag: 'soft' });
            if (strength === 'balanced') desiredTags.push({ kind: 'strength', tag: 'balanced' });
            if (strength === 'strong') desiredTags.push({ kind: 'strength', tag: 'strong' });

            if (style === 'classic') desiredTags.push({ kind: 'style', tag: 'classic' });
            if (style === 'modern') desiredTags.push({ kind: 'style', tag: 'modern' });
            if (style === 'mysterious') desiredTags.push({ kind: 'style', tag: 'mysterious' });

            const perfumeEntries = Object.entries(perfumes);
            const candidates = perfumeEntries.filter(([, perfume]) => perfume.gender === gender);
            const pool = candidates.length > 0 ? candidates : perfumeEntries;

            let bestKey = pool[0][0];
            let bestScore = -1;

            pool.forEach(([key, perfume]) => {
                const tags = extractTags(perfume);
                const score = scorePerfume(tags, desiredTags);
                if (score > bestScore) {
                    bestScore = score;
                    bestKey = key;
                }
            });

            const perfume = perfumes[bestKey];

            // Detect contradictions in user choices
            const contradictions = [];
            
            // Daily usage + Strong/Powerful notes (oud, spicy)
            if (usage === 'daily' && (note === 'oud' || note === 'spicy')) {
                contradictions.push('Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ø§ ÙŠØªÙ†Ø§Ø³Ø¨ Ø¹Ø§Ø¯Ø© Ù…Ø¹ Ø§Ù„Ø¹ÙˆØ¯ Ø£Ùˆ Ø§Ù„ØªÙˆØ§Ø¨Ù„ Ø§Ù„Ù‚ÙˆÙŠØ©');
            }
            
            // Soft strength + Oud/Spicy notes
            if (strength === 'soft' && (note === 'oud' || note === 'spicy')) {
                contradictions.push('Ø§Ù„Ø¹Ø·Ø± Ø§Ù„Ù†Ø§Ø¹Ù… Ù„Ø§ ÙŠØªÙ…Ø§Ø´Ù‰ Ù…Ø¹ Ù†ÙˆØªØ§Øª Ø§Ù„Ø¹ÙˆØ¯ Ø£Ùˆ Ø§Ù„ØªÙˆØ§Ø¨Ù„ Ø§Ù„Ø­Ø§Ø¯Ø©');
            }
            
            // Strong strength + Fresh/Floral notes
            if (strength === 'strong' && (note === 'fresh' || note === 'floral')) {
                contradictions.push('Ø§Ù„Ø¹Ø·Ø± Ø§Ù„Ù‚ÙˆÙŠ ÙˆØ§Ù„Ù„Ø§ÙØª Ù„Ø§ ÙŠØªÙ†Ø§Ø³Ø¨ Ø¹Ø§Ø¯Ø© Ù…Ø¹ Ø§Ù„Ø­Ù…Ø¶ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø¹Ø´Ø© Ø£Ùˆ Ø§Ù„Ø²Ù‡ÙˆØ± Ø§Ù„Ù†Ø§Ø¹Ù…Ø©');
            }
            
            // Formal occasions + Fresh notes
            if (usage === 'formal' && note === 'fresh') {
                contradictions.push('Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© ØªØªØ·Ù„Ø¨ Ø¹Ø§Ø¯Ø© Ø¹Ø·ÙˆØ±Ù‹Ø§ Ø£Ø¹Ù…Ù‚ Ù…Ù† Ø§Ù„Ø­Ù…Ø¶ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø¹Ø´Ø©');
            }
            
            // Night usage + Fresh notes
            if (usage === 'night' && note === 'fresh') {
                contradictions.push('Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠ ÙŠØªØ·Ù„Ø¨ Ø¹Ø§Ø¯Ø© Ø¹Ø·ÙˆØ±Ù‹Ø§ Ø£ÙƒØ«Ø± Ø¯ÙØ¦Ù‹Ø§ Ù…Ù† Ø§Ù„Ø­Ù…Ø¶ÙŠØ§Øª');
            }
            
            // Classic style + Fresh notes
            if (style === 'classic' && note === 'fresh') {
                contradictions.push('Ø§Ù„Ø·Ø§Ø¨Ø¹ Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ Ø§Ù„Ø£Ù†ÙŠÙ‚ Ù„Ø§ ÙŠØªÙ…Ø§Ø´Ù‰ Ø¹Ø§Ø¯Ø© Ù…Ø¹ Ø§Ù„Ù†ÙˆØªØ§Øª Ø§Ù„Ù…Ù†Ø¹Ø´Ø© Ø§Ù„Ø®ÙÙŠÙØ©');
            }
            
            // Modern style + Oud
            if (style === 'modern' && note === 'oud') {
                contradictions.push('Ø§Ù„Ø·Ø§Ø¨Ø¹ Ø§Ù„Ø¹ØµØ±ÙŠ Ø§Ù„Ù…Ø¶ÙŠØ¡ Ù„Ø§ ÙŠØªÙ†Ø§Ø³Ø¨ Ø¹Ø§Ø¯Ø© Ù…Ø¹ Ø§Ù„Ø¹ÙˆØ¯ Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ');
            }

            document.getElementById('plantImage').src = perfume.image;
            document.getElementById('plantImage').alt = perfume.name;
            document.getElementById('plantName').textContent = perfume.name;
            
            // Build description with contradiction notice if needed
            let descriptionHTML = `<strong>Ø§Ù„Ù†ÙˆØªØ§Øª:</strong> ${perfume.notes}<br><br>${perfume.description}`;
            
            if (contradictions.length > 0) {
                const contradictionText = contradictions.join('ØŒ ');
                descriptionHTML = `<div class="contradiction-notice">
                    <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> ${contradictionText}ØŒ Ù„ÙƒÙ† Ù‡Ø°Ø§ Ø£ÙØ¶Ù„ Ø®ÙŠØ§Ø± Ù…ØªØ§Ø­ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ø®ØªÙŠØ§Ø±Ø§ØªÙƒ.
                </div><br>` + descriptionHTML;
            }
            
            document.getElementById('plantDescription').innerHTML = descriptionHTML;

            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';

            window.scrollTo({ top: 0 });
        }

        // Form submission handler
        document.getElementById('quizForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Calculate result first
            calculateAndShowResult();
            
            // Submit data to PHP backend
            const formData = new FormData(this);
            
            fetch('index.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    console.log('Quiz data saved successfully');
                }
            })
            .catch(error => {
                console.error('Error saving quiz data:', error);
            });
        });

        document.getElementById('resetButton').addEventListener('click', function() {
            document.getElementById('quizForm').reset();
            currentStep = 1;
            showStep(1);
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultContainer').style.display = 'none';
            window.scrollTo({ top: 0 });
        });

        // Initialize
        showStep(1);
    </script>
</body>
</html>
